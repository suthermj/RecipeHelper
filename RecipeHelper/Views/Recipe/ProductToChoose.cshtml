@model IngredientsVM

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-3xl font-bold text-gray-900 mb-8 text-center">Add Ingredients to Recipe</h1>

    <form id="ingredientsForm" asp-action="SaveIngredients" method="post">
        <input type="hidden" name="RecipeId" value="@Model.RecipeId" />


        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            @for (int i = 0; i < Model.Ingredients.Count; i++)
            {
                @Html.HiddenFor(m => m.Ingredients[i].Id)
                @Html.HiddenFor(m => m.Ingredients[i].Name)

                <div class="bg-white rounded-lg shadow-md p-4 flex flex-col items-center">
                    <img src="https://www.kroger.com/product/images/xlarge/front/@Model.Ingredients[i].Upc"
                         alt="@Model.Ingredients[i].Name"
                         class="rounded-lg object-cover w-full h-40 mb-4" />

                    <h2 class="text-lg font-semibold text-gray-800 text-center">@Model.Ingredients[i].Name</h2>

                    <div class="mt-4 flex items-center justify-center gap-2">
                        <button type="button"
                                class="text-xl text-indigo-600 hover:text-indigo-800"
                                onclick="decrementQuantity(@Model.Ingredients[i].Id)">
                            <i class="fa-solid fa-circle-minus"></i>
                        </button>

                        @Html.TextBoxFor(mbox => Model.Ingredients[i].Quantity, new
                            {
                                @id = "quantity-" + Model.Ingredients[i].Id,
                                @class = "w-16 text-center border border-gray-300 rounded-md py-1"
                            })

                        <button type="button"
                                class="text-xl text-indigo-600 hover:text-indigo-800"
                                onclick="incrementQuantity(@Model.Ingredients[i].Id)">
                            <i class="fa-solid fa-circle-plus"></i>
                        </button>
                    </div>
                </div>
            }
        </div>

        <div class="mt-10 flex justify-center">
            <button type="submit"
                    class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded shadow focus:outline-none">
                Add Ingredients to Recipe
            </button>
        </div>
    </form>
</div>

<script>
    function incrementQuantity(index) {
        var quantityInput = document.getElementById("quantity-" + index);
        var currentValue = parseInt(quantityInput.value) || 0;
        quantityInput.value = currentValue + 1;
    }

    function decrementQuantity(index) {
        var quantityInput = document.getElementById("quantity-" + index);
        var currentValue = parseInt(quantityInput.value) || 0;
        quantityInput.value = Math.max(0, currentValue - 1);
    }
</script>

<script src="https://kit.fontawesome.com/253b9e5551.js" crossorigin="anonymous"></script>
